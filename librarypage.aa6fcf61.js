function e(e,t,n,s){Object.defineProperty(e,t,{get:n,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},i={},a=n.parcelRequired76b;null==a&&((a=function(e){if(e in s)return s[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return s[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},n.parcelRequired76b=a),a.register("kyEFX",(function(t,n){var s,i;e(t.exports,"register",(function(){return s}),(function(e){return s=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var a={};s=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)a[t[n]]=e[t[n]]},i=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a.register("a79Io",(function(e,t){e.exports=new URL(a("kyEFX").resolve("iHCDC"),import.meta.url).toString()})),a("kyEFX").register(JSON.parse('{"5FICj":"librarypage.aa6fcf61.js","iHCDC":"noposter.751b8d89.jpg","5UbS1":"index.44f0d4c0.css","8mGr4":"index.f4fcb927.js"}')),a("hIzJZ");var o=a("25RCP"),l=a("9jUAk"),r=a("amyG6"),c=a("6vf3V");t(c).settings({timeout:2e3});(0,o.initializeApp)({apiKey:"AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc",authDomain:"filmoteka-bdb19.firebaseapp.com",projectId:"filmoteka-bdb19",storageBucket:"filmoteka-bdb19.appspot.com",messagingSenderId:"1051248700372",appId:"1:1051248700372:web:2dc6796345cd1c6fa94441"});const d=(0,l.getFirestore)(),u=(0,r.getAuth)(),m=document.querySelector(".info"),v=document.querySelector(".movie-list"),p=document.querySelector(".queue-btn"),b=document.querySelector(".watched-btn"),f=document.querySelector(".loader"),h=document.querySelectorAll(".pagination-btn"),_=document.querySelector(".pagination-btn__main"),g=document.querySelector(".pagination-btn__arrow-left"),L=document.querySelector(".pagination-btn__arrow-right"),y=document.querySelector(".pagination-list"),S=document.querySelector(".pagination");let x=1,I=1;function w(){b.classList.add("active-btn"),p.classList.remove("active-btn"),(0,r.onAuthStateChanged)(u,(e=>{if(e){q(e.uid).then((e=>e)).then((e=>{let t=e.filmsWatched;if(0===t.length)return S.classList.add("is-stealth"),m.classList.remove("is-stealth"),void $(t);if(I=Math.ceil(t.length/20),1!==I){let n=20*x,s=n-20;return t=e.filmsWatched.slice(s,n),$(t),S.classList.remove("is-stealth"),void k(x,I)}$(t),x=1,S.classList.remove("is-stealth"),k(x,I)}))}}))}function N(e){x=1,f.classList.remove("is-hidden__spinner"),e.target===b?(f.classList.add("is-hidden__spinner"),b.classList.add("active-btn"),p.classList.remove("active-btn")):e.target===p&&(b.classList.remove("active-btn"),p.classList.add("active-btn"),f.classList.add("is-hidden__spinner"));const t=e.target.id;(0,r.onAuthStateChanged)(u,(e=>{if(e){q(e.uid).then((e=>e)).then((e=>{let n=e[t];if(0===n.length)return S.classList.add("is-stealth"),m.classList.remove("is-stealth"),void C(n);if(I=Math.ceil(n.length/20),1===I)C(n),x=1,S.classList.remove("is-stealth"),k(x,I);else{let s=20*x,i=s-20;n=e[t].slice(i,s),C(n),S.classList.remove("is-stealth"),k(x,I)}}))}else console.log("user is logout")}))}async function q(e){const t=await(0,l.getDoc)((0,l.doc)(d,"users",`${e}`));if(t.exists()){return t.data()}}function C(e){if(v.innerHTML="",e.length<1)return v.innerHTML="",m.classList.remove("is-stealth"),void S.classList.add("is-stealth");m.classList.add("is-stealth"),E(e),S.classList.remove("is-stealth"),k(x,I)}function E(e){let t;t=e.map((({img:e,id:t,title:n,genres:s,date:i,vote_average:o})=>`<li class="movie-item">\n                    <img class="movie-img" src="${function(e){let t=new Image;t.src=a("a79Io");let n=e;null!==e&&""!==e||(n=t.src);return n}(e)}" data-id="${t}" alt="${n}" width="280">\n                    <h2 class="movie-title">${n}</h2>\n                    <p class="movie-description">${function(e){if(""===e)return"Unknown genre";if(e.includes(",")){const t=e.split(",");return t.length>2?t.slice(0,2).join(", ")+", others...":t.join(", ")}return e}(s)} | ${i} <span class="modal-votes">${o}</span></p>\n                </li>`)).join(""),v.insertAdjacentHTML("beforeend",t)}function $(e){v.innerHTML="",0===e.length?m.classList.remove("is-stealth"):(m.classList.add("is-stealth"),E(e))}function k(e,t){h[0].textContent=Number.parseInt(e)-4>0?1:"",Number.parseInt(e)-3==1?h[1].textContent=1:Number.parseInt(e)-3>0?h[1].textContent="...":h[1].textContent="",h[2].textContent=Number.parseInt(e)-2>0?Number.parseInt(e)-2:"",h[3].textContent=Number.parseInt(e)-1>0?Number.parseInt(e)-1:"",_.textContent=Number.parseInt(e),h[5].textContent=Number.parseInt(e)+1<=Number.parseInt(t)?Number.parseInt(e)+1:"",h[6].textContent=Number.parseInt(e)+2<=Number.parseInt(t)?Number.parseInt(e)+2:"",Number.parseInt(e)+3===Number.parseInt(t)?h[7].textContent=Number.parseInt(t):Number.parseInt(e)+3<=Number.parseInt(t)?h[7].textContent="...":h[7].textContent="",h[8].textContent=Number.parseInt(e)+4<=Number.parseInt(t)?Number.parseInt(t):"",h[5].textContent?L.classList.remove("disabled"):L.classList.add("disabled"),h[3].textContent?g.classList.remove("disabled"):g.classList.add("disabled")}function T(){if(b.classList.contains("active-btn"))return w(),void window.scrollTo({top:0,behavior:"smooth"});A(),window.scrollTo({top:0,behavior:"smooth"})}function A(){b.classList.remove("active-btn"),p.classList.add("active-btn"),(0,r.onAuthStateChanged)(u,(e=>{if(e){q(e.uid).then((e=>e)).then((e=>{let t=e.filmsQueue;if(0===t.length)return S.classList.add("is-stealth"),m.classList.remove("is-stealth"),void $(t);if(I=Math.ceil(t.length/20),1!==I){let n=20*x,s=n-20;return t=e.filmsQueue.slice(s,n),$(t),S.classList.remove("is-stealth"),void k(x,I)}$(t),x=1,S.classList.remove("is-stealth"),k(x,I)}))}else console.log("user is logout")}))}w(),f.classList.add("is-hidden__spinner"),p.addEventListener("click",N),b.addEventListener("click",N),g.addEventListener("click",(()=>{x<=1||(x-=1,T())})),L.addEventListener("click",(()=>{I<=x||(x=Number.parseInt(x)+1,T())})),y.addEventListener("click",(e=>{"BUTTON"===e.target.nodeName&&e.target.textContent&&"..."!==e.target.textContent&&(x=e.target.textContent,T())})),v.addEventListener("click",(async function(e){const n=e.target.dataset.id;if("IMG"!==e.target.nodeName)return;document.querySelector(".modal-thumb").innerHTML="",document.querySelector(".drop-box").classList.remove("drop-box--is-hidden"),document.querySelector(".button-up").classList.add("is-hidden"),(0,r.onAuthStateChanged)(u,(e=>{if(e){const s=e.uid;q(s).then((e=>e)).then((e=>{let i;if(b.classList.contains("active-btn")){i=e.filmsWatched;const o=i.find((e=>e.id===Number(n)));a=o,document.querySelector(".modal-thumb").insertAdjacentHTML("beforeend",function(e){return`<img class="modal__img" src="${e.img}" alt="" width="240">\n                <div class="modal__description-thumb">\n                    <h2 class="modal__title">${e.title}</h2>\n                    <ul class="movie-data">\n                        <li>\n                            <ul class="movie-data__name">\n                                <li>Vote / Votes</li>\n                                <li>Popularity</li>\n                                <li>Original Title</li>\n                                <li>Genre</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <ul class="movie-data__content">\n                                <li class="movie-data__item">\n                                    <span class="movie-votes__first">${e.vote_average}</span> / <span class="movie-votes__sec">${e.vote_count}</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-popularity__item">${e.popularity}</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-orig-title__item">${e.original_title}</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-genre__item">\n                                      ${e.genres}\n                                    </span>\n                                </li>\n                            </ul>\n                        </li>  \n                    </ul>\n                    \n                    <p class="movie-about">About</p>\n                    <p class="movie-about-text">${e.overview}</p>\n                    <ul class="modal-btns">\n                        <li class="modal-btns__item">\n                            <button class="button add-watched-btn delete" type="button" id="filmsWatchedDelete">Delete from Watched</button>\n                        </li>                       \n                    </ul>\n                </div>`}(a)),document.querySelector("body").classList.add("overflow-hidden");const r=document.querySelector("#filmsWatchedDelete");r.addEventListener("click",(function(){(0,l.updateDoc)((0,l.doc)(d,"users",s),{filmsWatched:(0,l.arrayRemove)(o)}),r.disabled=!0,r.classList.add("button-disabled"),t(c).success({title:"DELETE",message:"Successfully delete record!"}),setTimeout((()=>{w()}),100)}))}else if(p.classList.contains("active-btn")){i=e.filmsQueue;const a=i.find((e=>e.id===Number(n)));!function(e){document.querySelector(".modal-thumb").insertAdjacentHTML("beforeend",function(e){return`<img class="modal__img" src="${e.img}" alt="" width="240">\n              <div class="modal__description-thumb">\n                  <h2 class="modal__title">${e.title}</h2>\n                  <ul class="movie-data">\n                      <li>\n                          <ul class="movie-data__name">\n                              <li>Vote / Votes</li>\n                              <li>Popularity</li>\n                              <li>Original Title</li>\n                              <li>Genre</li>\n                          </ul>\n                      </li>\n                      <li>\n                          <ul class="movie-data__content">\n                              <li class="movie-data__item">\n                                  <span class="movie-votes__first">${e.vote_average}</span> / <span class="movie-votes__sec">${e.vote_count}</span>\n                              </li>\n                              <li class="movie-data__item">\n                                  <span class="movie-popularity__item">${e.popularity}</span>\n                              </li>\n                              <li class="movie-data__item">\n                                  <span class="movie-orig-title__item">${e.original_title}</span>\n                              </li>\n                              <li class="movie-data__item">\n                                  <span class="movie-genre__item">\n                                    ${e.genres}\n                                  </span>\n                              </li>\n                          </ul>\n                      </li>  \n                  </ul>\n                  \n                  <p class="movie-about">About</p>\n                  <p class="movie-about-text">${e.overview}</p>\n                  <ul class="modal-btns">\n                      <li class="modal-btns__item">\n                          <button class="button add-watched-btn delete" type="button" id="filmsQueueDelete">Delete from queue</button>\n                      </li>\n                  </ul>\n              </div>`}(e)),document.querySelector("body").classList.add("overflow-hidden")}(a);const o=document.querySelector("#filmsQueueDelete");o.addEventListener("click",(function(){(0,l.updateDoc)((0,l.doc)(d,"users",s),{filmsQueue:(0,l.arrayRemove)(a)}),o.disabled=!0,o.classList.add("button-disabled"),t(c).success({title:"DELETE",message:"Successfully delete record!"}),setTimeout((()=>{A()}),100)}))}var a}))}else console.log("user is logout")}))}));function H(){document.querySelector(".drop-box").classList.add("drop-box--is-hidden"),document.querySelector("body").classList.remove("overflow-hidden")}document.querySelector("#modal-btn").addEventListener("click",(()=>H())),document.addEventListener("keydown",(e=>{"Escape"===e.code&&H()})),document.querySelector(".drop-box").addEventListener("click",(e=>{document.querySelector(".modal").contains(e.target)||H()}));
//# sourceMappingURL=librarypage.aa6fcf61.js.map
