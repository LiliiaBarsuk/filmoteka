!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},a={},o=n.parcelRequired7c6;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},n.parcelRequired7c6=o),o.register("iE7OH",(function(t,n){var r,a;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var o={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},a=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o.register("7uOvd",(function(e,t){e.exports=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("iXtly")})),o.register("aNJCr",(function(t,n){var r;e(t.exports,"getBundleURL",(function(){return r}),(function(e){return r=e}));var a={};function o(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(e){var t=a[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return o(e[2])}return"/"}(),a[e]=t),t}})),o("iE7OH").register(JSON.parse('{"EVgbq":"index.5ea7ff9c.js","iXtly":"noposter.751b8d89.jpg","5UbS1":"index.44f0d4c0.css","6W72L":"index.9d96d969.js","iLoYJ":"index.398bedef.js"}'));var i;i=JSON.parse('{"genres":[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"},{"id":10759,"name":"Action & Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":10762,"name":"Kids"},{"id":9648,"name":"Mystery"},{"id":10763,"name":"News"},{"id":10764,"name":"Reality"},{"id":10765,"name":"Sci-Fi & Fantasy"},{"id":10766,"name":"Soap"},{"id":10767,"name":"Talk"},{"id":10768,"name":"War & Politics"},{"id":37,"name":"Western"}]}');var c=o("bpxeT"),s=o("hKHmD"),u=o("2TvXO"),d=o("6Urw1"),l=o("c69b4"),m=o("3SEMc");c=o("bpxeT"),u=o("2TvXO"),d=o("6Urw1"),l=o("c69b4"),m=o("3SEMc");t(k=o("k6tlf")).settings({timeout:2e3});var p=document.querySelector("#user-email-reg"),f=document.querySelector("#user-password-reg"),v=document.querySelector("#btn-reg"),h=document.querySelector("#user-email-auth"),b=document.querySelector("#user-password-auth"),g=document.querySelector("#btn-auth"),y=document.querySelector(".library"),x=document.querySelector(".authorization"),S=document.querySelector(".auth-modal"),L=document.querySelector(".registr-modal"),_=document.querySelector("body");x.classList.add("is-stealth"),y.classList.add("is-stealth");(0,d.initializeApp)({apiKey:"AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc",authDomain:"filmoteka-bdb19.firebaseapp.com",projectId:"filmoteka-bdb19",storageBucket:"filmoteka-bdb19.appspot.com",messagingSenderId:"1051248700372",appId:"1:1051248700372:web:2dc6796345cd1c6fa94441"});var k,w=(0,l.getFirestore)(),q=(0,m.getAuth)();function E(e,t){return A.apply(this,arguments)}function A(){return(A=t(c)(t(u).mark((function e(n,r){var a;return t(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:n,id:r,filmsWatched:[],filmsQueue:[]},e.prev=1,e.next=4,(0,l.setDoc)((0,l.doc)(w,"users","".concat(r)),a,{merge:!0});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function C(){return(C=t(c)(t(u).mark((function e(n){var r,a;return t(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=h.value,a=b.value,e.prev=3,e.next=6,(0,m.signInWithEmailAndPassword)(q,r,a);case 6:e.sent,y.classList.remove("is-stealth"),x.classList.add("is-stealth"),S.classList.remove("open"),_.classList.remove("overflow-hidden"),t(k).success({title:"OK",message:"Successful login to the account!"}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.log("error"),t(k).error({title:"Error",message:"Check the entered data or Sign up"});case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}function I(){return(I=t(c)(t(u).mark((function e(n){var r,a,o,i;return t(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=p.value,a=f.value,e.prev=3,e.next=6,(0,m.createUserWithEmailAndPassword)(q,r,a);case 6:o=e.sent,i=o.user.uid,E(r,i),y.classList.remove("is-stealth"),x.classList.add("is-stealth"),L.classList.remove("open"),_.classList.remove("overflow-hidden"),t(k).success({title:"OK",message:"Account created successfully!"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),t(k).error({title:"Error",message:"Check the entered data or Sign in"});case 19:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}v.addEventListener("click",(function(e){return I.apply(this,arguments)})),g.addEventListener("click",(function(e){return C.apply(this,arguments)})),(0,m.onAuthStateChanged)(q,(function(e){e?y.classList.remove("is-stealth"):x.classList.remove("is-stealth")})),t(k=o("k6tlf")).settings({timeout:2e3});(0,d.initializeApp)({apiKey:"AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc",authDomain:"filmoteka-bdb19.firebaseapp.com",projectId:"filmoteka-bdb19",storageBucket:"filmoteka-bdb19.appspot.com",messagingSenderId:"1051248700372",appId:"1:1051248700372:web:2dc6796345cd1c6fa94441"});var N,D,T=(0,l.getFirestore)(),H=(0,m.getAuth)(),O=document.querySelector(".button-up"),j="filmsWatched",W=".add-watched-btn",F="filmsQueue",z=".add-queue-btn";function M(){return M=t(c)(t(u).mark((function e(n){var r;return t(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("IMG"===n.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:return document.querySelector(".modal-thumb").innerHTML="",document.querySelector(".drop-box").classList.remove("drop-box--is-hidden"),O.classList.add("is-hidden"),r="".concat(X,"movie/").concat(n.target.dataset.id,"?api_key=").concat(Z),e.next=8,fetch(r).then((function(e){return e.json()})).then((function(e){document.querySelector(".modal-thumb").insertAdjacentHTML("beforeend",J(e)),document.querySelector("body").classList.add("overflow-hidden"),P(e,W),Q(e,z),N=document.querySelector(W),D=document.querySelector(z),N.addEventListener("click",(function(e){var r=j;(0,m.onAuthStateChanged)(H,(function(a){if(a){var o=a.uid;function i(){return(i=t(c)(t(u).mark((function a(i){var c,s,d;return t(u).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,l.getDoc)((0,l.doc)(T,"users","".concat(i)));case 2:if(!(c=a.sent).exists()){a.next=18;break}s=c.data(),d=0;case 6:if(!(d<s.filmsWatched.length)){a.next=15;break}if(s.filmsWatched[d].id!==n.id){a.next=12;break}return B(o,r,n),e.target.textContent="Add to watched",t(k).success({title:"DELETE",message:"Successfully delete record!"}),a.abrupt("return");case 12:d+=1,a.next=6;break;case 15:U(o,r,n),e.target.textContent="Delete from watched",t(k).success({title:"ADD",message:"Successfully insert record!"});case 18:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(e){i.apply(this,arguments)}(o)}else console.log("user is logout")}))})),D.addEventListener("click",(function(e){var r=F;(0,m.onAuthStateChanged)(H,(function(a){if(a){var o=a.uid;function i(){return(i=t(c)(t(u).mark((function a(i){var c,s,d;return t(u).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,l.getDoc)((0,l.doc)(T,"users","".concat(i)));case 2:if(!(c=a.sent).exists()){a.next=18;break}s=c.data(),d=0;case 6:if(!(d<s.filmsQueue.length)){a.next=15;break}if(s.filmsQueue[d].id!==n.id){a.next=12;break}return B(o,r,n),e.target.textContent="Add to queue",t(k).success({title:"DELETE",message:"Successfully delete record!"}),a.abrupt("return");case 12:d+=1,a.next=6;break;case 15:U(o,r,n),e.target.textContent="Delete from queue",t(k).success({title:"ADD",message:"Successfully insert record!"});case 18:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(e){i.apply(this,arguments)}(o)}else console.log("user is logout")}))}));var n={id:e.id,title:e.title,img:he(e.poster_path),vote_average:e.vote_average,vote_count:e.vote_count,popularity:e.popularity,original_title:e.original_title,genres:V(e.genres),overview:e.overview,date:be(e.release_date)};R()})).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function U(e,n,r){(0,l.updateDoc)((0,l.doc)(T,"users","".concat(e)),t(s)({},n,(0,l.arrayUnion)(r)))}function B(e,n,r){(0,l.updateDoc)((0,l.doc)(T,"users","".concat(e)),t(s)({},n,(0,l.arrayRemove)(r)))}function R(){(0,m.onAuthStateChanged)(H,(function(e){e||(document.querySelector(W).classList.add("disabled"),document.querySelector(z).classList.add("disabled"))}))}function P(e,n){(0,m.onAuthStateChanged)(H,(function(r){if(r){function a(){return(a=t(c)(t(u).mark((function r(a){var o,i,c;return t(u).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.getDoc)((0,l.doc)(T,"users","".concat(a)));case 2:if(!(o=t.sent).exists()){t.next=16;break}i=o.data(),c=0;case 6:if(!(c<i.filmsWatched.length)){t.next=16;break}if(i.filmsWatched[c].id!==e.id){t.next=12;break}return document.querySelector(n).textContent="Delete from watched",t.abrupt("return");case 12:document.querySelector(n).textContent="Add to watched";case 13:c+=1,t.next=6;break;case 16:case"end":return t.stop()}}),r)})))).apply(this,arguments)}!function(e){a.apply(this,arguments)}(r.uid)}}))}function Q(e,n){(0,m.onAuthStateChanged)(H,(function(r){if(r){function a(){return(a=t(c)(t(u).mark((function r(a){var o,i,c;return t(u).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.getDoc)((0,l.doc)(T,"users","".concat(a)));case 2:if(!(o=t.sent).exists()){t.next=16;break}i=o.data(),c=0;case 6:if(!(c<i.filmsQueue.length)){t.next=16;break}if(i.filmsQueue[c].id!==e.id){t.next=12;break}return document.querySelector(n).textContent="Delete from queue",t.abrupt("return");case 12:document.querySelector(n).textContent="Add to queue";case 13:c+=1,t.next=6;break;case 16:case"end":return t.stop()}}),r)})))).apply(this,arguments)}!function(e){a.apply(this,arguments)}(r.uid)}}))}function K(){document.querySelector(".drop-box").classList.add("drop-box--is-hidden"),document.querySelector("body").classList.remove("overflow-hidden"),O.classList.remove("is-hidden")}function J(e){return'<img class="modal__img" src="'.concat(he(e.poster_path),'" alt="" width="240">\n                <div class="modal__description-thumb">\n                    <h2 class="modal__title">').concat(e.title,'</h2>\n                    <ul class="movie-data">\n                        <li>\n                            <ul class="movie-data__name">\n                                <li>Vote / Votes</li>\n                                <li>Popularity</li>\n                                <li>Original Title</li>\n                                <li>Genre</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <ul class="movie-data__content">\n                                <li class="movie-data__item">\n                                    <span class="movie-votes__first">').concat(e.vote_average,'</span> / <span class="movie-votes__sec">').concat(e.vote_count,'</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-popularity__item">').concat(e.popularity,'</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-orig-title__item">').concat(e.original_title,'</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-genre__item">').concat(V(e.genres),'</span>\n                                </li>\n                            </ul>\n                        </li>  \n                    </ul>\n                    \n                    <p class="movie-about">About</p>\n                    <p class="movie-about-text">').concat(e.overview,'</p>\n                    <ul class="modal-btns">\n                        <li class="modal-btns__item">\n                            <button class="button add-watched-btn" type="button" id="filmsWatched">Add to Watched</button>\n                        </li>\n                        <li class="modal-btns__item">\n                            <button class="button add-queue-btn" type="button" id="filmsQueue">Add to queue</button>\n                        </li>\n                    </ul>\n                </div>')}function V(e){return e.map((function(e){return e.name})).join(", ")}var X="https://api.themoviedb.org/3/",Z="afc22cf5c573169849cabd6217d3b7d3",G="",Y=1,$=1,ee=!1,te=document.querySelector(".header__input"),ne=document.querySelector(".search-btn"),re=document.querySelector(".header__form"),ae=document.querySelector(".movie-list"),oe=document.querySelector("#modal-btn"),ie=document.querySelectorAll(".pagination-btn"),ce=document.querySelector(".pagination-btn__main"),se=document.querySelector(".pagination-btn__arrow-left"),ue=document.querySelector(".pagination-btn__arrow-right"),de=document.querySelector(".pagination-list"),le=document.querySelector(".pagination"),me=document.querySelector(".loader");function pe(e){return"".concat(X,"trending/movie/week?api_key=").concat(Z,"&page=").concat(e)}function fe(e,t){return"".concat(X,"search/movie?api_key=").concat(Z,"&query=").concat(e.trim(),"&page=").concat(t)}function ve(e){fetch(e).then((function(e){return e.json()})).then((function(e){ge(void 0===e.results||e.results.length<1),0!==e.results.length&&(me.classList.add("is-hidden__spinner"),le.classList.remove("is-stealth"),ae.innerHTML="",$=e.total_pages,function(e,t){ie[0].textContent=Number.parseInt(e)-4>0?1:"",Number.parseInt(e)-3==1?ie[1].textContent=1:Number.parseInt(e)-3>0?ie[1].textContent="...":ie[1].textContent="";ie[2].textContent=Number.parseInt(e)-2>0?Number.parseInt(e)-2:"",ie[3].textContent=Number.parseInt(e)-1>0?Number.parseInt(e)-1:"",ce.textContent=Number.parseInt(e),ie[5].textContent=Number.parseInt(e)+1<=Number.parseInt(t)?Number.parseInt(e)+1:"",ie[6].textContent=Number.parseInt(e)+2<=Number.parseInt(t)?Number.parseInt(e)+2:"",Number.parseInt(e)+3===Number.parseInt(t)?ie[7].textContent=Number.parseInt(t):Number.parseInt(e)+3<=Number.parseInt(t)?ie[7].textContent="...":ie[7].textContent="";ie[8].textContent=Number.parseInt(e)+4<=Number.parseInt(t)?Number.parseInt(t):"",ie[5].textContent?ue.classList.remove("disabled"):ue.classList.add("disabled");ie[3].textContent?se.classList.remove("disabled"):se.classList.add("disabled")}(Y,$),ae.insertAdjacentHTML("beforeend",function(e){return e.results.map((function(e){var t=e.poster_path,n=e.id,r=e.title,a=e.genre_ids,o=e.release_date,c=e.vote_average;return'<li class="movie-item movie-view__image">\n                    <img class="movie-img" src="'.concat(he(t),'" data-id="').concat(n,'" alt="').concat(r,'" width="280">\n                    <span class ="movie-view__rate">').concat(c,'</span>\n                    <h2 class="movie-title">').concat(r,'</h2>\n                    <p class="movie-description">').concat(function(e){return e.length<1?"Unknown genre":e.length>2?e.slice(0,2).map((function(e){for(var t=0;t<i.genres.length;t+=1)if(i.genres[t].id===e)return i.genres[t].name})).join(", ")+", others...":e.map((function(e){for(var t=0;t<i.genres.length;t+=1)if(i.genres[t].id===e)return i.genres[t].name})).join(", ")}(a)," | ").concat(be(o),"</p>\n                </li>")})).join("")}(e)))})).catch((function(e){return console.log(e)}))}function he(e){var t=new Image;t.src=o("7uOvd");var n="https://image.tmdb.org/t/p/w300".concat(e);return null===e&&(n=t.src),n}function be(e){var t="Unknown date";return e&&(t=e.slice(0,4)),t}function ge(e){return e?(document.querySelector(".not-found-notification").classList.remove("disabled"),me.classList.add("is-hidden__spinner")):document.querySelector(".not-found-notification").classList.add("disabled"),document.querySelector(".not-found-notification").classList.contains("disabled")}function ye(){ve(ee?fe(G,Y):pe(Y)),window.scrollTo({top:0,behavior:"smooth"})}re.addEventListener("submit",(function(e){e.preventDefault()})),ve(pe(Y)),ne.addEventListener("click",(function(e){ge(G.trim().length<1)&&(Y=1,ee=!0,me.classList.remove("is-hidden__spinner"),ve(fe(G,Y)))})),te.addEventListener("input",(function(e){G=e.currentTarget.value})),ae.addEventListener("click",(function(e){return M.apply(this,arguments)})),oe.addEventListener("click",(function(){return K()})),document.addEventListener("keydown",(function(e){"Escape"===e.code&&K()})),document.querySelector(".drop-box").addEventListener("click",(function(e){document.querySelector(".modal").contains(e.target)||K()})),se.addEventListener("click",(function(){Y<=1||(Y-=1,ye())})),ue.addEventListener("click",(function(){$<=Y||(Y=Number.parseInt(Y)+1,ye())})),de.addEventListener("click",(function(e){"BUTTON"===e.target.nodeName&&e.target.textContent&&"..."!==e.target.textContent&&(Y=e.target.textContent,ye())}));var xe=document.querySelector(".authorization"),Se=document.querySelector(".auth-modal"),Le=document.querySelector("#auth-modal-btn"),_e=document.querySelector(".registration"),ke=document.querySelector("#registr-modal"),we=document.querySelector("#registr-modal-btn"),qe=document.querySelector(".auth-modal__box"),Ee=document.querySelector(".registr-modal__box"),Ae=document.querySelector(".authorization-link"),Ce=document.querySelector("body");function Ie(){Se.classList.remove("open"),Ce.classList.remove("overflow-hidden"),document.removeEventListener("keydown",Oe),Le.removeEventListener("click",Ie),qe.removeEventListener("click",Ne)}function Ne(e){e.currentTarget===e.target&&Ie()}function De(e){e.preventDefault(),ke.classList.remove("open"),Se.classList.add("open")}function Te(){ke.classList.remove("open"),Ce.classList.remove("overflow-hidden"),we.removeEventListener("click",Te),Ee.removeEventListener("click",He),Ae.removeEventListener("click",De)}function He(e){e.currentTarget===e.target&&Te()}function Oe(e){"Escape"===e.code&&(Ie(),Te())}xe.addEventListener("click",(function(e){e.preventDefault(),Se.classList.add("open"),Ce.classList.add("overflow-hidden"),document.addEventListener("keydown",Oe),Le.addEventListener("click",Ie),qe.addEventListener("click",Ne)})),_e.addEventListener("click",(function(e){e.preventDefault(),Se.classList.remove("open"),ke.classList.add("open"),we.addEventListener("click",Te),Ee.addEventListener("click",He),Ae.addEventListener("click",De)})),o("jHF6Y");d=o("6Urw1"),m=o("3SEMc");var je=document.querySelector("#logout-main");je.classList.add("is-stealth");(0,d.initializeApp)({apiKey:"AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc",authDomain:"filmoteka-bdb19.firebaseapp.com",projectId:"filmoteka-bdb19",storageBucket:"filmoteka-bdb19.appspot.com",messagingSenderId:"1051248700372",appId:"1:1051248700372:web:2dc6796345cd1c6fa94441"});var We=(0,m.getAuth)();je.addEventListener("click",(function(){(0,m.signOut)(We).then((function(){location.href="../filmoteka-team3/index.html"})).catch((function(e){console.log(e)}))})),(0,m.onAuthStateChanged)(We,(function(e){e?je.classList.remove("is-stealth"):je.classList.add("is-stealth")}))}();
//# sourceMappingURL=index.5ea7ff9c.js.map
