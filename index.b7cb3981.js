function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},i={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},n.parcelRequired7c6=a),a.register("kyEFX",(function(t,n){var o,i;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var a={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)a[t[n]]=e[t[n]]},i=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a.register("a79Io",(function(e,t){e.exports=new URL(a("kyEFX").resolve("iHCDC"),import.meta.url).toString()})),a("kyEFX").register(JSON.parse('{"5ZPII":"index.b7cb3981.js","iHCDC":"noposter.751b8d89.jpg","5UbS1":"index.44f0d4c0.css","6P0kS":"index.431efa7e.js","8mGr4":"index.1d690fbe.js"}'));var s;s=JSON.parse('{"genres":[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"},{"id":10759,"name":"Action & Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":10762,"name":"Kids"},{"id":9648,"name":"Mystery"},{"id":10763,"name":"News"},{"id":10764,"name":"Reality"},{"id":10765,"name":"Sci-Fi & Fantasy"},{"id":10766,"name":"Soap"},{"id":10767,"name":"Talk"},{"id":10768,"name":"War & Politics"},{"id":37,"name":"Western"}]}');var r=a("25RCP"),c=a("9jUAk"),d=a("amyG6");r=a("25RCP"),c=a("9jUAk"),d=a("amyG6");t(q=a("6vf3V")).settings({timeout:2e3});const l=document.querySelector("#user-email-reg"),u=document.querySelector("#user-password-reg"),m=document.querySelector("#btn-reg"),f=document.querySelector("#user-email-auth"),p=document.querySelector("#user-password-auth"),v=document.querySelector("#btn-auth"),g=document.querySelector(".library"),h=document.querySelector(".authorization"),b=document.querySelector(".auth-modal"),y=document.querySelector(".registr-modal"),S=document.querySelector("body");h.classList.add("is-stealth"),g.classList.add("is-stealth");(0,r.initializeApp)({apiKey:"AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc",authDomain:"filmoteka-bdb19.firebaseapp.com",projectId:"filmoteka-bdb19",storageBucket:"filmoteka-bdb19.appspot.com",messagingSenderId:"1051248700372",appId:"1:1051248700372:web:2dc6796345cd1c6fa94441"});const _=(0,c.getFirestore)(),L=(0,d.getAuth)();var q;m.addEventListener("click",(async function(e){e.preventDefault();const n=l.value,o=u.value;try{const e=await(0,d.createUserWithEmailAndPassword)(L,n,o);!async function(e,t){const n={email:e,id:t,filmsWatched:[],filmsQueue:[]};try{await(0,c.setDoc)((0,c.doc)(_,"users",`${t}`),n,{merge:!0})}catch(e){console.log(e)}}(n,e.user.uid),g.classList.remove("is-stealth"),h.classList.add("is-stealth"),y.classList.remove("open"),S.classList.remove("overflow-hidden"),t(q).success({title:"OK",message:"Account created successfully!"})}catch(e){t(q).error({title:"Error",message:"Check the entered data or Sign in"})}})),v.addEventListener("click",(async function(e){e.preventDefault();const n=f.value,o=p.value;try{await(0,d.signInWithEmailAndPassword)(L,n,o);g.classList.remove("is-stealth"),h.classList.add("is-stealth"),b.classList.remove("open"),S.classList.remove("overflow-hidden"),t(q).success({title:"OK",message:"Successful login to the account!"})}catch(e){console.log("error"),t(q).error({title:"Error",message:"Check the entered data or Sign up"})}})),(0,d.onAuthStateChanged)(L,(e=>{e?g.classList.remove("is-stealth"):h.classList.remove("is-stealth")})),t(q=a("6vf3V")).settings({timeout:2e3});(0,r.initializeApp)({apiKey:"AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc",authDomain:"filmoteka-bdb19.firebaseapp.com",projectId:"filmoteka-bdb19",storageBucket:"filmoteka-bdb19.appspot.com",messagingSenderId:"1051248700372",appId:"1:1051248700372:web:2dc6796345cd1c6fa94441"});const w=(0,c.getFirestore)(),k=(0,d.getAuth)();let x,E;const C=document.querySelector(".button-up");function A(e,t,n){(0,c.updateDoc)((0,c.doc)(w,"users",`${e}`),{[t]:(0,c.arrayUnion)(n)})}function I(e,t,n){(0,c.updateDoc)((0,c.doc)(w,"users",`${e}`),{[t]:(0,c.arrayRemove)(n)})}function D(){document.querySelector(".drop-box").classList.add("drop-box--is-hidden"),document.querySelector("body").classList.remove("overflow-hidden"),C.classList.remove("is-hidden")}function N(e){return e.map((e=>e.name)).join(", ")}const $="https://api.themoviedb.org/3/",j="afc22cf5c573169849cabd6217d3b7d3";let T="",H=1,F=1,W=!1;const P=document.querySelector(".header__input"),R=document.querySelector(".search-btn"),z=document.querySelector(".header__form"),O=document.querySelector(".movie-list"),M=document.querySelector("#modal-btn"),U=document.querySelectorAll(".pagination-btn"),B=document.querySelector(".pagination-btn__main"),Q=document.querySelector(".pagination-btn__arrow-left"),G=document.querySelector(".pagination-btn__arrow-right"),K=document.querySelector(".pagination-list"),V=document.querySelector(".pagination"),Z=document.querySelector(".loader");function J(e){return`${$}trending/movie/week?api_key=${j}&page=${e}`}function X(e,t){return`${$}search/movie?api_key=${j}&query=${e.trim()}&page=${t}`}function Y(e){fetch(e).then((e=>e.json())).then((e=>{ne(void 0===e.results||e.results.length<1),0!==e.results.length&&(Z.classList.add("is-hidden__spinner"),V.classList.remove("is-stealth"),O.innerHTML="",F=e.total_pages,function(e,t){U[0].textContent=Number.parseInt(e)-4>0?1:"",Number.parseInt(e)-3==1?U[1].textContent=1:Number.parseInt(e)-3>0?U[1].textContent="...":U[1].textContent="";U[2].textContent=Number.parseInt(e)-2>0?Number.parseInt(e)-2:"",U[3].textContent=Number.parseInt(e)-1>0?Number.parseInt(e)-1:"",B.textContent=Number.parseInt(e),U[5].textContent=Number.parseInt(e)+1<=Number.parseInt(t)?Number.parseInt(e)+1:"",U[6].textContent=Number.parseInt(e)+2<=Number.parseInt(t)?Number.parseInt(e)+2:"",Number.parseInt(e)+3===Number.parseInt(t)?U[7].textContent=Number.parseInt(t):Number.parseInt(e)+3<=Number.parseInt(t)?U[7].textContent="...":U[7].textContent="";U[8].textContent=Number.parseInt(e)+4<=Number.parseInt(t)?Number.parseInt(t):"",U[5].textContent?G.classList.remove("disabled"):G.classList.add("disabled");U[3].textContent?Q.classList.remove("disabled"):Q.classList.add("disabled")}(H,F),O.insertAdjacentHTML("beforeend",function(e){return e.results.map((({poster_path:e,id:t,title:n,genre_ids:o,release_date:i,vote_average:a})=>`<li class="movie-item movie-view__image">\n                    <img class="movie-img" src="${ee(e)}" data-id="${t}" alt="${n}" width="280">\n                    <span class ="movie-view__rate">${a}</span>\n                    <h2 class="movie-title">${n}</h2>\n                    <p class="movie-description">${function(e){return e.length<1?"Unknown genre":e.length>2?e.slice(0,2).map((e=>{for(let t=0;t<s.genres.length;t+=1)if(s.genres[t].id===e)return s.genres[t].name})).join(", ")+", others...":e.map((e=>{for(let t=0;t<s.genres.length;t+=1)if(s.genres[t].id===e)return s.genres[t].name})).join(", ")}(o)} | ${te(i)}</p>\n                </li>`)).join("")}(e)))})).catch((e=>console.log(e)))}function ee(e){let t=new Image;t.src=a("a79Io");let n=`https://image.tmdb.org/t/p/w300${e}`;return null===e&&(n=t.src),n}function te(e){let t="Unknown date";return e&&(t=e.slice(0,4)),t}function ne(e){return e?(document.querySelector(".not-found-notification").classList.remove("disabled"),Z.classList.add("is-hidden__spinner")):document.querySelector(".not-found-notification").classList.add("disabled"),document.querySelector(".not-found-notification").classList.contains("disabled")}function oe(){Y(W?X(T,H):J(H)),window.scrollTo({top:0,behavior:"smooth"})}z.addEventListener("submit",(e=>{e.preventDefault()})),Y(J(H)),R.addEventListener("click",(function(e){ne(T.trim().length<1)&&(H=1,W=!0,Z.classList.remove("is-hidden__spinner"),Y(X(T,H)))})),P.addEventListener("input",(function(e){T=e.currentTarget.value})),O.addEventListener("click",(async function(e){if("IMG"!==e.target.nodeName)return;document.querySelector(".modal-thumb").innerHTML="",document.querySelector(".drop-box").classList.remove("drop-box--is-hidden"),C.classList.add("is-hidden");let n=`${$}movie/${e.target.dataset.id}?api_key=${j}`;await fetch(n).then((e=>e.json())).then((e=>{document.querySelector(".modal-thumb").insertAdjacentHTML("beforeend",function(e){return`<img class="modal__img" src="${ee(e.poster_path)}" alt="" width="240">\n                <div class="modal__description-thumb">\n                    <h2 class="modal__title">${e.title}</h2>\n                    <ul class="movie-data">\n                        <li>\n                            <ul class="movie-data__name">\n                                <li>Vote / Votes</li>\n                                <li>Popularity</li>\n                                <li>Original Title</li>\n                                <li>Genre</li>\n                            </ul>\n                        </li>\n                        <li>\n                            <ul class="movie-data__content">\n                                <li class="movie-data__item">\n                                    <span class="movie-votes__first">${e.vote_average}</span> / <span class="movie-votes__sec">${e.vote_count}</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-popularity__item">${e.popularity}</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-orig-title__item">${e.original_title}</span>\n                                </li>\n                                <li class="movie-data__item">\n                                    <span class="movie-genre__item">${N(e.genres)}</span>\n                                </li>\n                            </ul>\n                        </li>  \n                    </ul>\n                    \n                    <p class="movie-about">About</p>\n                    <p class="movie-about-text">${e.overview}</p>\n                    <ul class="modal-btns">\n                        <li class="modal-btns__item">\n                            <button class="button add-watched-btn" type="button" id="filmsWatched">Add to Watched</button>\n                        </li>\n                        <li class="modal-btns__item">\n                            <button class="button add-queue-btn" type="button" id="filmsQueue">Add to queue</button>\n                        </li>\n                    </ul>\n                </div>`}(e)),document.querySelector("body").classList.add("overflow-hidden"),function(e,t){(0,d.onAuthStateChanged)(k,(n=>{if(n){async function o(n){const o=await(0,c.getDoc)((0,c.doc)(w,"users",`${n}`));if(o.exists()){const n=o.data();for(let o=0;o<n.filmsWatched.length;o+=1){if(n.filmsWatched[o].id===e.id)return void(document.querySelector(t).textContent="Delete from watched");document.querySelector(t).textContent="Add to watched"}}}o(n.uid)}}))}(e,".add-watched-btn"),function(e,t){(0,d.onAuthStateChanged)(k,(n=>{if(n){async function o(n){const o=await(0,c.getDoc)((0,c.doc)(w,"users",`${n}`));if(o.exists()){const n=o.data();for(let o=0;o<n.filmsQueue.length;o+=1){if(n.filmsQueue[o].id===e.id)return void(document.querySelector(t).textContent="Delete from queue");document.querySelector(t).textContent="Add to queue"}}}o(n.uid)}}))}(e,".add-queue-btn"),x=document.querySelector(".add-watched-btn"),E=document.querySelector(".add-queue-btn"),x.addEventListener("click",(function(e){const o="filmsWatched";(0,d.onAuthStateChanged)(k,(i=>{if(i){const a=i.uid;!async function(i){const s=await(0,c.getDoc)((0,c.doc)(w,"users",`${i}`));if(s.exists()){const i=s.data();for(let s=0;s<i.filmsWatched.length;s+=1)if(i.filmsWatched[s].id===n.id)return I(a,o,n),e.target.textContent="Add to watched",void t(q).success({title:"DELETE",message:"Successfully delete record!"});A(a,o,n),e.target.textContent="Delete from watched",t(q).success({title:"ADD",message:"Successfully insert record!"})}}(a)}else console.log("user is logout")}))})),E.addEventListener("click",(function(e){const o="filmsQueue";(0,d.onAuthStateChanged)(k,(i=>{if(i){const a=i.uid;!async function(i){const s=await(0,c.getDoc)((0,c.doc)(w,"users",`${i}`));if(s.exists()){const i=s.data();for(let s=0;s<i.filmsQueue.length;s+=1)if(i.filmsQueue[s].id===n.id)return I(a,o,n),e.target.textContent="Add to queue",void t(q).success({title:"DELETE",message:"Successfully delete record!"});A(a,o,n),e.target.textContent="Delete from queue",t(q).success({title:"ADD",message:"Successfully insert record!"})}}(a)}else console.log("user is logout")}))}));const n={id:e.id,title:e.title,img:ee(e.poster_path),vote_average:e.vote_average,vote_count:e.vote_count,popularity:e.popularity,original_title:e.original_title,genres:N(e.genres),overview:e.overview,date:te(e.release_date)};(0,d.onAuthStateChanged)(k,(e=>{e||(document.querySelector(".add-watched-btn").classList.add("disabled"),document.querySelector(".add-queue-btn").classList.add("disabled"))}))})).catch((e=>console.log(e)))})),M.addEventListener("click",(()=>D())),document.addEventListener("keydown",(e=>{"Escape"===e.code&&D()})),document.querySelector(".drop-box").addEventListener("click",(e=>{document.querySelector(".modal").contains(e.target)||D()})),Q.addEventListener("click",(()=>{H<=1||(H-=1,oe())})),G.addEventListener("click",(()=>{F<=H||(H=Number.parseInt(H)+1,oe())})),K.addEventListener("click",(e=>{"BUTTON"===e.target.nodeName&&e.target.textContent&&"..."!==e.target.textContent&&(H=e.target.textContent,oe())}));const ie=document.querySelector(".authorization"),ae=document.querySelector(".auth-modal"),se=document.querySelector("#auth-modal-btn"),re=document.querySelector(".registration"),ce=document.querySelector("#registr-modal"),de=document.querySelector("#registr-modal-btn"),le=document.querySelector(".auth-modal__box"),ue=document.querySelector(".registr-modal__box"),me=document.querySelector(".authorization-link"),fe=document.querySelector("body");function pe(){ae.classList.remove("open"),fe.classList.remove("overflow-hidden"),document.removeEventListener("keydown",ye),se.removeEventListener("click",pe),le.removeEventListener("click",ve)}function ve(e){e.currentTarget===e.target&&pe()}function ge(e){e.preventDefault(),ce.classList.remove("open"),ae.classList.add("open")}function he(){ce.classList.remove("open"),fe.classList.remove("overflow-hidden"),de.removeEventListener("click",he),ue.removeEventListener("click",be),me.removeEventListener("click",ge)}function be(e){e.currentTarget===e.target&&he()}function ye(e){"Escape"===e.code&&(pe(),he())}ie.addEventListener("click",(function(e){e.preventDefault(),ae.classList.add("open"),fe.classList.add("overflow-hidden"),document.addEventListener("keydown",ye),se.addEventListener("click",pe),le.addEventListener("click",ve)})),re.addEventListener("click",(function(e){e.preventDefault(),ae.classList.remove("open"),ce.classList.add("open"),de.addEventListener("click",he),ue.addEventListener("click",be),me.addEventListener("click",ge)})),a("hIzJZ");r=a("25RCP"),d=a("amyG6");const Se=document.querySelector("#logout-main");Se.classList.add("is-stealth");(0,r.initializeApp)({apiKey:"AIzaSyBQAPWu6PN62rmzf-LlZS504qxL8csmmBc",authDomain:"filmoteka-bdb19.firebaseapp.com",projectId:"filmoteka-bdb19",storageBucket:"filmoteka-bdb19.appspot.com",messagingSenderId:"1051248700372",appId:"1:1051248700372:web:2dc6796345cd1c6fa94441"});const _e=(0,d.getAuth)();Se.addEventListener("click",(function(){(0,d.signOut)(_e).then((()=>{location.href="../filmoteka-team3/index.html"})).catch((e=>{console.log(e)}))})),(0,d.onAuthStateChanged)(_e,(e=>{e?Se.classList.remove("is-stealth"):Se.classList.add("is-stealth")}));
//# sourceMappingURL=index.b7cb3981.js.map
